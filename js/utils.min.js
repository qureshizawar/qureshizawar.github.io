function isAndroid(){return/Android/i.test(navigator.userAgent)}function isiOS(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function isMobile(){return isAndroid()||isiOS()}function toggleLoadingUI(t,e="loading",n="main"){t?(document.getElementById(e).style.display="block",document.getElementById(n).style.display="none"):(document.getElementById(e).style.display="none",document.getElementById(n).style.display="block")}function toTuple({y:t,x:e}){return[t,e]}async function renderToCanvas(t,e){const[n,i]=t.shape,a=new ImageData(i,n),o=await t.data();for(let t=0;t<n*i;++t){const e=4*t,n=3*t;a.data[e+0]=o[n+0],a.data[e+1]=o[n+1],a.data[e+2]=o[n+2],a.data[e+3]=255}e.putImageData(a,0,0)}function renderImageToCanvas(t,e,n){n.width=e[0],n.height=e[1],n.getContext("2d").drawImage(t,0,0)}function set_static_output_size(t){return t.clientWidth>t.naturalWidth&&t.clientHeight>t.naturalHeight?(output_HEIGHT=t.clientHeight,output_WIDTH=Math.round(t.naturalWidth/t.naturalHeight*output_HEIGHT),output_WIDTH>t.clientWidth&&(output_WIDTH=t.clientWidth,output_HEIGHT=Math.round(t.naturalHeight/t.naturalWidth*output_WIDTH))):t.clientWidth<t.naturalWidth&&t.clientHeight<t.naturalHeight?(output_WIDTH=t.clientWidth,output_HEIGHT=Math.round(t.naturalHeight/t.naturalWidth*output_WIDTH),output_HEIGHT>t.clientHeight&&(output_HEIGHT=t.clientHeight,output_WIDTH=Math.round(t.naturalWidth/t.naturalHeight*output_HEIGHT))):t.clientWidth<t.naturalWidth?(output_WIDTH=t.clientWidth,output_HEIGHT=Math.round(t.naturalHeight/t.naturalWidth*output_WIDTH)):(output_HEIGHT=t.clientHeight,output_WIDTH=Math.round(t.naturalWidth/t.naturalHeight*output_HEIGHT)),[output_WIDTH,output_HEIGHT]}function file_infer(t,e,n,i){if(n.textContent="Status: Fetching image...",window.File&&window.FileReader&&window.FileList&&window.Blob){var a=new FileReader;a.addEventListener("load",(function(t){const n=t.target.result;window.loadImage(n,(function(t){"error"===t.type?console.log("couldn't load image:",t):window.EXIF.getData(t,(function(){var n=window.EXIF.getTag(this,"Orientation"),a=window.loadImage.scale(t,{orientation:n||0,canvas:!0});e.src=a.toDataURL(),e.onload=()=>i(e)}))}))})),a.readAsDataURL(t)}else console.log("The File APIs are not fully supported in this browser.")}function url_infer(t,e,n,i){n.textContent="Status: Fetching image...";let a=new URL(t.value);var o=new XMLHttpRequest;o.open("GET",cors_api_url+a,!0),o.responseType="blob",o.send(),o.onload=function(){var t=new FileReader;t.readAsDataURL(o.response),t.onload=t=>{e.src=t.target.result,e.onload=()=>i(e)}}}async function setupCamera(t){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const e=document.getElementById("video");e.width=videoWidth,e.height=videoHeight;const n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"rear"==t?"environment":"user",width:mobile?void 0:videoWidth,height:mobile?void 0:videoHeight}});return e.srcObject=n,new Promise(t=>{e.onloadedmetadata=()=>{t(e)}})}async function loadVideo(t){const e=await setupCamera(t);return e.play(),e}