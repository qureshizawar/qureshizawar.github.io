<!DOCTYPE html>
<html class="no-js" lang="en">

<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-157023283-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-157023283-1');
  </script>

  <meta charset="utf-8">
  <!--meta http-equiv="X-UA-Compatible" content="IE=edge"!-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Portfolio</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.7.4/dist/tf.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.7.0/dist/tf.min.js"></script>

  <!-- Import @tensorflow/tfjs or @tensorflow/tfjs-core -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script> -->

  <!-- Adds the WASM backend to the global backend registry -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm/dist/tf-backend-wasm.js"></script> -->
  <!-- Adds the WebGL backend to the global backend registry -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script> -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
  <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
  <div id="mobile-menu-open" class="shadow-large">
    <i class="fa fa-bars" aria-hidden="true"></i>
  </div>
  <!-- End #mobile-menu-toggle -->
  <header>
    <div id="mobile-menu-close">
      <span>Close</span> <i class="fa fa-times" aria-hidden="true"></i>
    </div>
    <ul id="menu" class="shadow">
      <li>
        <a class="no-scroll" href="/index.html">About Me</a>
      </li>
      <li>
        <a class="no-scroll" href="/classifierDemo.html">Image classifier</a>
      </li>
      <li>
        <a class="no-scroll" href="/depthDemo.html">Depth</a>
      </li>
      <li>
        <a class="no-scroll" href="/styleDemo.html">Style</a>
      </li>
      <li>
        <a class="no-scroll" href="/profileDemo.html">Profile</a>
      </li>

    </ul>
  </header>

  <div id="demo" class="optional-section background-alt">
    <!--<div class="optional-section background-alt">-->
    <h2 class="heading" style="padding:10px">Profile</h2>

    <div class="demo-section-block shadow-large">
      <h3>Create your own stylised profile picture using ML!
      </h3>
      <section>
        <h3> Instructions: </h3>

        <ul>
          <li>Select the <b>Use a different background</b> option if you would like to replace the background of your
            picture</li>
          <li>Then upload the picture you would like stylised under the <b>Your picture</b> section</li>
          <li>Click run! you should be able to see and download the output under the <b>Output</b> section</li>
        </ul>

        <h3> Examples: </h3>

        <p>There are several options in the <b> Settings </b> section to experiment with (please see examples below) where you can
          select different styles (more on the way!), completely replace the background of your picture,
          make the background blurred out, etc.</p>
        <img style="display: inline-block" class="ex_img" src="assets/demo_images/profile_2.jfif" />
        <!-- <img style="display: inline-block" class="ex_img" src="assets/demo_images/blur_bg.jpg" /> -->
        <img style="display: inline-block" class="ex_img" src="assets/demo_images/style_2.jpg" />
        <img style="display: inline-block" class="ex_img" src="assets/demo_images/masked_bg_2.jpg" />
        <img style="display: inline-block" class="ex_img" src="assets/demo_images/masked_bg_sketch.jpg" />
        <img style="display: inline-block" class="ex_img" src="assets/demo_images/masked_bg_feathers.jpg" />

        <p></p>

        <p><b>Note:</b> Since these models run locally on device, any uploaded pictures stay safely
          on the device. Please note that the first run may
          be much slower than subsequent runs as Tensorflow loads the necessary
          files. (WIP so there may be bugs!) </p>

        <div id="info" style='display:none'>
        </div>


        <!-- Solid divider -->
        <hr class="solid">
        </hr>

        <h3>Settings:</h3>
        <table style="width: 100%;">
          <tbody>
            <tr>
              <td>
                <p style="display: inline-block"> Output type: </p>
                <div class="dropdown" style="display: inline-block">
                  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    <t id="dropdown_output">Style whole image</t>
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a id="masked_background" href="#" onclick="set_output('masked_background')">No style</a></li>
                    <li><a id="style_only" href="#" onclick="set_output('style_only')">Style whole image</a></li>
                    <li><a id="masked_style" href="#" onclick="set_output('masked_style')">Style person only</a></li>
                    <li><a id="masked_style_inverted" href="#" onclick="set_output('masked_style_inverted')">Style background only</a></li>
                    <!--li><a id="all" href="#">all</a></li-->
                  </ul>
                </div>
              </td>
            </tr>
            <td>
              <p style="display: inline-block"> Style: </p>
              <div class="dropdown" style="display: inline-block">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                  <t id="dropdown_style">mosaic</t>
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <!-- <li><a id="mosaic_small" href="#" onclick="load_style('mosaic_small')">mosaic_small</a></li> -->
                  <li><a id="mosaic" href="#" onclick="load_style('mosaic')">mosaic</a></li>
                  <li><a id="madhubani" href="#" onclick="load_style('madhubani')">madhubani</a></li>
                  <li><a id="sketch" href="#" onclick="load_style('sketch')">sketch</a></li>
                  <li><a id="feathers" href="#" onclick="load_style('feathers')">feathers</a></li>
                </ul>
              </div>
            </td>
            </tr>
            <tr>
              <td>
                <p style="display: inline-block"> Style quality: </p>
                <div class="dropdown" style="display: inline-block">
                  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    <t id="dropdown_style_qual">high</t>
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a id="style_low" href="#" onclick="set_style_res('style_low')">low</a></li>
                    <li><a id="style_medium" href="#" onclick="set_style_res('style_medium')">medium</a></li>
                    <li><a id="style_high" href="#" onclick="set_style_res('style_high')">high</a></li>
                    <!-- <li><a id="style_vhigh" href="#" onclick="set_style_res('style_vhigh')">very high</a></li> -->
                  </ul>
                </div>
              </td>
            </tr>
            <!-- <tr>
              <td>
                <p style="display: inline-block"> Mask quality: </p>
                <div class="dropdown" style="display: inline-block">
                  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    <t id="dropdown_seg_qual">high</t>
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a id="seg_low" href="#" onclick="set_seg_res('seg_low')">low</a></li>
                    <li><a id="seg_medium" href="#" onclick="set_seg_res('seg_medium')">medium</a></li>
                    <li><a id="seg_high" href="#" onclick="set_seg_res('seg_high')">high</a></li>
                  </ul>
                </div>
              </td>
            </tr> -->


            <tr>
              <td>
                <p style="display:block;">Blur background:</p>
                <label class="switch">
                  <input type="checkbox" id="blur_bg" />
                  <span class="slider round"></span>
                </label>
              </td>
              <td>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Solid divider -->
        <hr class="solid">
        </hr>

        <div id="main" style='display:block'>
          <div id='mainImage' style='display:block'>
            <table style="width: 100%; max-width: 300px;">
              <tbody>

                <tr>
                  <td>
                    <h3>Use a different background:</h3>
                  </td>
                  <td>
                    <label class="switch">
                      <input type="checkbox" checked id="bg_use" />
                      <span class="slider round"></span>
                    </label>
                  </td>
                </tr>
              </tbody>
            </table>

            <div id="bg_table" style='display:block'>
              <table style="width: 100%; max-width: 400px;">
                <tbody>
                  <!-- <tr>
                  <td>
                    <p>Use different background:</p>
                  </td>
                  <td>
                    <label class="switch">
                      <input type="checkbox" checked id="bg_use" />
                      <span class="slider round"></span>
                    </label>
                  </td>
                </tr> -->
                  <tr>
                    <td>
                      <p> Select an image:</p>
                    </td>
                    <td>
                      <p>Upload an image:</p>
                    </td>
                    <td>
                      <p>Enter URL:</p>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label class="switch">
                        <input type="checkbox" checked id="bg_selectinput" />
                        <span class="slider round"></span>
                      </label>
                    </td>
                    <td>
                      <label class="switch">
                        <input type="checkbox" id="bg_fileinput" />
                        <span class="slider round"></span>
                      </label>
                    </td>
                    <td>
                      <label class="switch">
                        <input type="checkbox" id="bg_urlinput" />
                        <span class="slider round"></span>
                      </label>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div id="bg_file-container" style='display:none'>
                <input type="file" style="padding-bottom:10px; padding-top:10px" id="bg_files" name="bg_files" accept=".jpg, .jpeg, .png" />
              </div>
              <div id="bg_url-container" style='display:none'>
                <form style="padding-bottom:10px; padding-top:10px">
                  <input type="text" value="" id="bg_imagename" />
                </form>
              </div>
              <div>
                <input type="button" style='display:none' id="bg_url" value="Load" />
              </div>

              <div class="dropdown" id="dropdown_bg" style="display: block">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                  <t id="bg_dropdown_out">canvas art</t>
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li><a id="white" href="#" onclick="bg_load('white')">blank</a></li>
                  <li><a id="abstract" href="#" onclick="bg_load('abstract')">abstract</a></li>
                  <li><a id="floral" href="#" onclick="bg_load('floral')">floral</a></li>
                  <li><a id="feathers" href="#" onclick="bg_load('feathers')">feathers</a></li>

                  <li><a id="floral_patchwork" href="#" onclick="bg_load('floral_patchwork')">floral patchwork</a></li>
                  <li><a id="canvas_art" href="#" onclick="bg_load('canvas_art')">canvas art</a></li>
                </ul>
              </div>

              <p></p>
              <img class="inp_img" id="bg_img" src="assets/demo_images/canvas_art.jpg" />
            </div>

            <!-- Solid divider -->
            <hr class="solid">
            </hr>

            <h3> Your picture: </h3>
            <table style="width: 100%; max-width: 400px;">
              <tbody>
                <tr>
                  <td>
                    <p>Upload an image:</p>
                  </td>
                  <td>
                    <p>Enter URL:</p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <label class="switch">
                      <input type="checkbox" checked id="fileinput" />
                      <span class="slider round"></span>
                    </label>
                  </td>
                  <td>
                    <label class="switch">
                      <input type="checkbox" id="urlinput" />
                      <span class="slider round"></span>
                    </label>
                  </td>
                </tr>
              </tbody>
            </table>

            <div id="file-container" style='display:block'>
              <input type="file" style="padding-bottom:10px; padding-top:10px" id="files_style" name="files_style" accept=".jpg, .jpeg, .png" />
              <div>
                <input type="button" id="style_files_btn" value="Run" />
              </div>
            </div>
            <div id="url-container" style='display:none'>
              <form style="padding-bottom:10px; padding-top:10px">
                <input type="text" value="" id="imagename_style" />
              </form>
              <div>
                <input type="button" id="btn_style" value="Run" />
              </div>
            </div>


            <p></p>
            <img class="inp_img" id="inpimg_style" src="/assets/demo_images/profile_2.jfif" />

            <!-- Solid divider -->
            <hr class="solid">
            </hr>

            <h3 id="status_style"></h3>
            <h3 class="section-head">Output:</h3>
            <canvas id="mask" class="canvas"></canvas>
            <p></p>
            <a id="download" download="profile.jpg" href="" onclick="download_img(this);" style='display:none; width: 100%; max-width: 400px;'>Download image</a>
          </div>

        </div>
        <!-- End .optional-section-block -->

    </div>
    <!-- End .optional-section -->

    <div class="demo-section-block shadow-large">
      <div id="main2" style='display:block'>

        <div>
          <h3>
            Details
          </h3>
          <p>
            This demo combines <b>style transfer models</b> (please see the details section of my
            <a href="/styleDemo.html">Real-time style transfer demo</a> for information on how the models were optimised
            using techniques such as <b>pruning</b>) and
            a <b>semantic segmentation model</b> to extract people out of an image. The semantic segmentation model is based on
            <a href="https://arxiv.org/abs/1905.02244">MobileNetV3</a> and was mostly trained on open datasets and lightly pruned to give the final model.
          </p>
          <p> All models were trained and optimised in <b>Pytorch</b> and then converted for deployment on <b>TensorFlow.js</b>.
            For deployment, all the layers in the models that could be <b>fused</b> were fused and the models <b>quantised</b>
            to give the final optimised models.
          </p>

        </div>

        <!-- Solid divider -->
        <hr class="solid">
        </hr>

        <div>
          <h3>
            Currently working on
          </h3>
          <ul>
            <li>
              Deploying arbitrary style transfer model to allow for style transfer from any user defined image
            </li>
            <li>
              Making a video version of the demo
            </li>
            <li>
              Deploying the demo as a <b>React Native</b> app
            </li>
          </ul>

        </div>

        <!-- Solid divider -->
        <hr class="solid">
        </hr>

        <div>
          <h3>
            Credits
          </h3>
          <p>
            This demo was put together by <a href="https://github.com/qureshizawar">Zawar Qureshi</a>
            but could not have been done without the following:
          </p>
          <ul>
            <li>
              Authors of <a href="https://arxiv.org/abs/1603.08155">the Real-Time Style Transfer paper</a>.
            </li>
            <li>
              Authors of <a href="https://arxiv.org/abs/1905.02244">the MobileNetV3 paper</a>.
            </li>
            <li>
              Authors of <a href="https://arxiv.org/abs/1612.01105">the PSP net paper</a>.
            </li>
            <li>
              The <a href="https://github.com/nerox8664/onnx2keras">onnx2keras package</a>.
            </li>
            <li>
              The <a href="https://js.tensorflow.org">TensorFlow.js library</a>.
            </li>
          </ul>
          <p>
            I'd love to hear from people interested
            in making tools/apps using these models!
          </p>
        </div>

      </div>
      <!-- End .optional-section-block -->

    </div>
    <!-- End .optional-section -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col-sm-5 copyright">
            <p>
              Copyright &copy; 2020 Zawar Qureshi
            </p>
          </div>
          <div class="col-sm-2 top">
            <span id="to-top">
              <i class="fa fa-chevron-up" aria-hidden="true"></i>
            </span>
          </div>
          <div class="col-sm-5 social">
            <ul>
              <li>
                <a href="https://github.com/qureshizawar" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
              </li>
              <li>
                <a href="https://stackoverflow.com/" target="_blank"><i class="fa fa-stack-overflow" aria-hidden="true"></i></a>
              </li>
              <li>
                <a href="https://linkedin.com/in/zawarqureshi/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
              </li>
              <li>
                <a href="https://www.facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
              </li>
              <li>
                <a href="https://twitter.com/" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <!-- End footer -->
    <script src="js/scripts.min.js"></script>
    <script type="text/javascript" src="js/utils.min.js"></script>
    <!-- <script type="text/javascript" src="js/utils.js"></script> -->
    <!-- <script src="js/profileDemo.js"></script> -->
    <script src="js/profileDemo.min.js"></script>
</body>

</html>
